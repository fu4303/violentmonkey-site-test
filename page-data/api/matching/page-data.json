{"componentChunkName":"component---src-templates-post-template-js","path":"/api/matching/","result":{"data":{"site":{"siteMetadata":{"title":"Violentmonkey"}},"markdownRemark":{"id":"1bd7c620-e0c3-544d-b6ec-fcbb6319b411","html":"<p>There are four types of rules: <code class=\"language-text\">@match</code> / <code class=\"language-text\">@exclude-match</code> / <code class=\"language-text\">@include</code> / <code class=\"language-text\">@exclude</code> in Violentmonkey.</p>\n<h2 id=\"match--exclude-match\" style=\"position:relative;\"><a href=\"#match--exclude-match\" aria-label=\"match  exclude match permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>@match / @exclude-match</h2>\n<p>It is recommended to use <code class=\"language-text\">@match</code> / <code class=\"language-text\">@exclude-match</code> rather than <code class=\"language-text\">@include</code> / <code class=\"language-text\">@exclude</code> because the <em>match</em> rules are safer and more strict.</p>\n<p><code class=\"language-text\">@match</code> defines a URL matching rule. <code class=\"language-text\">@exclude-match</code> defines a match rule but used to exclude the matched URLs, similar to <code class=\"language-text\">@exclude</code>.</p>\n<p>For more details, see <a href=\"https://developer.chrome.com/extensions/match_patterns\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Match Patterns</a> for Chrome extensions.</p>\n<p>Note that match patterns only work on scheme, host and path, i.e. match patterns always ignore query string and hash.</p>\n<p>Since Violentmonkey v2.10.4, some additional rules are accepted:</p>\n<ul>\n<li>the scheme part accepts <code class=\"language-text\">http*</code> to match <code class=\"language-text\">http</code> or <code class=\"language-text\">https</code>;</li>\n<li>the host part accepts wildcards (<code class=\"language-text\">*</code>) at any position, e.g. <code class=\"language-text\">www.google.*</code>;</li>\n<li>the host part accepts <code class=\"language-text\">.tld</code> to match any top level domain suffix.</li>\n</ul>\n<p>Examples:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// @match *://*/*</span>\n<span class=\"token comment\">// @exclude-match *://*.tk/*</span></code></pre></div>\n<h2 id=\"include--exclude\" style=\"position:relative;\"><a href=\"#include--exclude\" aria-label=\"include  exclude permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>@include / @exclude</h2>\n<p>Each <code class=\"language-text\">@include</code> and <code class=\"language-text\">@exclude</code> rule can be one of the following:</p>\n<ul>\n<li>\n<p>a normal string</p>\n<p>If the string does not start or end with a slash (<code class=\"language-text\">/</code>), it will be used as a normal string.</p>\n<p>If there are wildcards (<code class=\"language-text\">*</code>), each of them matches any characters.</p>\n<p>e.g. <code class=\"language-text\">https://www.google.com/*</code> matches the following:</p>\n<ul>\n<li><code class=\"language-text\">https://www.google.com/</code></li>\n<li><code class=\"language-text\">https://www.google.com/any/subview</code></li>\n</ul>\n<p>but not the following:</p>\n<ul>\n<li><code class=\"language-text\">http://www.google.com/</code></li>\n<li><code class=\"language-text\">https://www.google.com.hk/</code></li>\n</ul>\n<p>If there is no wildcard in the string, the rule matches the entire URL.</p>\n<p>e.g. <code class=\"language-text\">https://www.google.com/</code> matches only <code class=\"language-text\">https://www.google.com/</code> but not <code class=\"language-text\">https://www.google.com/any/subview</code>.</p>\n<p>The host part accepts <code class=\"language-text\">.tld</code> to match top level domain suffix.</p>\n<p>e.g. <code class=\"language-text\">https://www.google.tld/</code> matches both <code class=\"language-text\">https://www.google.com/</code> and <code class=\"language-text\">https://www.google.co.jp/</code>.</p>\n</li>\n<li>\n<p>a regular expression</p>\n<p>If the string starts and ends with a slash (<code class=\"language-text\">/</code>), it will be compiled as a regular expression.</p>\n<p>e.g. <code class=\"language-text\">/\\.google\\.com[\\.\\/]/</code> matches the following:</p>\n<ul>\n<li><code class=\"language-text\">https://www.google.com/</code>,</li>\n<li><code class=\"language-text\">https://www.google.com/any/subview</code></li>\n<li><code class=\"language-text\">http://www.google.com/</code></li>\n<li><code class=\"language-text\">https://www.google.com.hk/</code></li>\n</ul>\n</li>\n</ul>\n<p>Examples:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// @include *</span>\n<span class=\"token comment\">// @include https://www.google.com/*</span>\n<span class=\"token comment\">// @include /\\.com\\.hk\\//</span>\n<span class=\"token comment\">// @exclude https://www.google.com/exact/url</span></code></pre></div>\n<h2 id=\"how-does-a-script-match\" style=\"position:relative;\"><a href=\"#how-does-a-script-match\" aria-label=\"how does a script match permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How does a script match?</h2>\n<p>In short, a script will execute if it matches any <code class=\"language-text\">@match</code> or <code class=\"language-text\">@include</code> rule and does not match any <code class=\"language-text\">@exclude-match</code> or <code class=\"language-text\">@exclude</code> rule.</p>\n<p>Here is the long version:</p>\n<ul>\n<li>If any <code class=\"language-text\">@exclude-match</code> or <code class=\"language-text\">@exclude</code> rule matches, the script does not match.</li>\n<li>Otherwise if any <code class=\"language-text\">@match</code> rule is defined, the script matches only if some of the <code class=\"language-text\">@match</code> rules match.</li>\n<li>If no <code class=\"language-text\">@match</code> rule is defined, we fallback to <code class=\"language-text\">@include</code> rules and the script matches only if some of the <code class=\"language-text\">@include</code> rules match.</li>\n<li>If neither <code class=\"language-text\">@match</code> nor <code class=\"language-text\">@include</code> rule is defined, the script is assumed to match.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5353fff61b7784074245599dfc3ebf63/1fbe8/match.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 110.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEKUlEQVQ4y42VTUhqaRiAv/IvPZZ/3a6pV0s9fxwzzzlKXmIsudGNNgqB2szCoNUQTNEsskUWrST62bRp0dpd1C6ixUxBliEaVgRBpP1BCdlq3Dm8Xh3u0NTcF97vO985533O+/d9B6E35OzsDGUyGXR0dITK5TLyeDximEFBWltbEUVRiCAIRJJkRd+VRCJRt7u7izY3N9WFQiHx/Pz8193d3e+lUgmgdWq1+hWQ47i3gYeHh2hnZwdtbGyIc7nc5OXl5frJyUkveDg6OiqkKEpAkqQAx/F6HMcRKM/zbwOPj49RPB5Ha2trtTAbEUISnuc1BEEoaJoGVZMkKaNpGoG+6yEAw+EwikQiKBaLNU9PT3t0Oh3W09Mjczqd/yjHcQqWZYUsy74PBIEcVb8uoiiq0WAwQHhCHMcFBEEIl5eXASLlOE4MsP8Ffid1Go1GRZKkAsIlSVIO1yaTScjzvIRl2R8Dzs3NocXFRbSwsKCIRqOfEULYly9fKqG6XC4pz/Pg3QeO4yTvAmv56O/vR4FAAA0ODmKBQEAnkUhEDodDzDAMqMRqtdZxHNf4Cgi9BGWHudZXkD+j0Yg0Gk2tykqGYSDkRsgnTdNKv98PENkPA/V6PTwW+Hw+YyQSsU1OTqJUKoWsVitSqVS1SOT/AsJNs9mM2traACSqeoBRFCWz2WwKiqLUY2NjTRMTE0Rt68HHOjs7URWCvQLabLaK6nS6eovFIsNxXEIQhAjH8Uaj0aian58HTxtgAM8A2NHR8TawqgKe5zG32y3u6upqaG5uFvr9/pZoNNoFIK/XK7fb7ai9vb0ChLAdDsd/h1xdSBwOh5phmAa73S4jSVLa19eHjYyMfNLr9UK3260E7yEVNE1LKYqSYxj22kMYnE4nqIhhGKXZbG4iCEIOhiaTSQ17+PT0FCmVSjVN0w0WiwXSISYIQtrT0/O6yjBUQ4abzU6nU+pyuTCDwSDx+XytMzMzn2dnZ+VTU1MeyKPX68VYlpV5PB5saGhI7vV6tcFgUAbFWlpa+tY2sBgfH5cGg0HF+vq6AI4mi8VSPzw8LAyFQh+7u7sbw+HwB3iX53nBwMCAAK6fnp5gEoH93t4eSqfT32Dn5+eo1hLwAObe3l6k1WrrtFqtFNYtLS1S6FWQlZUVOI3kpVKpLR6PO7e3t+2FQqFta2tLWjHO5/PeZDL5ayKR+C2Xy/1Ug7vdbvBIwXGciuO4VpZlsVAopITDYn9/f+rl5aWcz+fL9/f35WKxWM5ms18rhjc3N3/c3t6WHx4eyhcXF38ihMSBQKCpuk/lLMsqWZaVQq5jsVg92BwcHFiy2Ww4k8kMp9Ppn09PT39JJBIfK8BUKmXK5XIdV1dXHclk8hPkBv4ncKR/16eVAq6urlZsrq+vUbFYrOTx8fERvby8QKTob/WJrNszdo7sAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5353fff61b7784074245599dfc3ebf63/8e964/match.webp 150w,\n/static/5353fff61b7784074245599dfc3ebf63/c85cb/match.webp 300w,\n/static/5353fff61b7784074245599dfc3ebf63/e88ff/match.webp 600w,\n/static/5353fff61b7784074245599dfc3ebf63/4578a/match.webp 757w\"\n              sizes=\"(max-width: 600px) 100vw, 600px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5353fff61b7784074245599dfc3ebf63/8a4e8/match.png 150w,\n/static/5353fff61b7784074245599dfc3ebf63/5a46d/match.png 300w,\n/static/5353fff61b7784074245599dfc3ebf63/0a47e/match.png 600w,\n/static/5353fff61b7784074245599dfc3ebf63/1fbe8/match.png 757w\"\n            sizes=\"(max-width: 600px) 100vw, 600px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5353fff61b7784074245599dfc3ebf63/0a47e/match.png\"\n            alt=\"match.png\"\n            title=\"match.png\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>","fields":{"tagSlugs":null,"type":"pages"},"frontmatter":{"title":"Matching","tags":null,"date":"2017-12-02T22:32:50.000Z","sidebar":{"match":"/api/","order":2}},"tableOfContents":"<ul>\n<li><a href=\"#match--exclude-match\">@match / @exclude-match</a></li>\n<li><a href=\"#include--exclude\">@include / @exclude</a></li>\n<li><a href=\"#how-does-a-script-match\">How does a script match?</a></li>\n</ul>"}},"pageContext":{"slug":"/api/matching/","type":"pages"}},"staticQueryHashes":["1878747374","2344890832","3365866253","3486277714"]}